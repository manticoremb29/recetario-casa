<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Recetario Mensual ‚Äî Casa</title>

  <style>
    :root{
      --bg: #fbfbfd;
      --bg2:#fff7f3;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --shadow: 0 18px 50px rgba(17,24,39,.10);
      --shadow2: 0 10px 25px rgba(17,24,39,.08);
      --accent:#ff6b6b;
      --accent2:#7c3aed;
      --good:#10b981;
      --chip:#f3f4f6;
      --btn:#111827;
      --btnText:#ffffff;
      --soft1:#ffe7e7;
      --soft2:#e8f1ff;
      --soft3:#fff2d9;
      --soft4:#e9fbf3;
      --radius:18px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(255,107,107,.18), transparent 60%),
        radial-gradient(1200px 700px at 90% -20%, rgba(124,58,237,.16), transparent 55%),
        linear-gradient(180deg, var(--bg2) 0%, var(--bg) 45%, #ffffff 100%);
    }

    .wrap{ max-width:1120px; margin:0 auto; padding:22px; }

    .hero{
      display:flex; gap:16px; align-items:stretch; justify-content:space-between;
      background: rgba(255,255,255,.78);
      border:1px solid var(--line);
      border-radius: var(--radius);
      padding:16px;
      box-shadow: var(--shadow2);
      backdrop-filter: blur(8px);
      overflow:hidden;
    }
    .heroLeft{ flex: 1; min-width: 240px; }
    .heroTitle{
      margin:0;
      font-size:22px;
      letter-spacing:-.02em;
      display:flex; align-items:center; gap:10px;
    }
    .heroSub{ margin:6px 0 0; color:var(--muted); line-height:1.35; }

    .heroBadges{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px;
      border-radius:999px;
      background:var(--chip);
      border:1px solid var(--line);
      font-size:12px;
      color: #374151;
    }
    .dot{ width:8px; height:8px; border-radius:999px; background:var(--good); }

    .heroRight{
      width: 330px;
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(255,107,107,.16), rgba(124,58,237,.12));
      border:1px solid rgba(229,231,235,.8);
      position:relative;
      overflow:hidden;
      display:flex; align-items:flex-end; justify-content:flex-start;
      padding:14px;
    }
    .heroImg{
      position:absolute; inset:0;
      background-size:cover;
      background-position:center;
      filter: saturate(1.05) contrast(1.05);
      opacity:.92;
    }
    .heroOverlay{
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(255,255,255,.00) 0%, rgba(255,255,255,.86) 72%, rgba(255,255,255,.95) 100%);
    }
    .heroCaption{
      position:relative;
      z-index:2;
      width:100%;
      display:flex; justify-content:space-between; align-items:end; gap:10px;
    }
    .heroCaption h2{
      margin:0;
      font-size:14px;
      color:#111827;
      letter-spacing:-.01em;
    }
    .heroCaption p{
      margin:2px 0 0;
      font-size:12px;
      color:var(--muted);
    }
    .miniChip{
      position:relative;
      z-index:2;
      padding:8px 10px;
      border-radius: 12px;
      background: rgba(255,255,255,.85);
      border:1px solid rgba(229,231,235,.9);
      font-size:12px;
      color:#111827;
      box-shadow: 0 8px 20px rgba(17,24,39,.10);
      white-space:nowrap;
    }

    .grid{ display:grid; gap:14px; grid-template-columns: 1fr; margin-top:14px; }
    @media (min-width: 980px){ .grid{ grid-template-columns: 380px 1fr; } }

    .card{
      background: rgba(255,255,255,.85);
      border:1px solid var(--line);
      border-radius: var(--radius);
      padding:16px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
    }

    label{ display:block; font-size:12px; color:var(--muted); margin:10px 0 6px; }
    select{
      width:100%;
      padding:12px 12px;
      border-radius: 14px;
      border:1px solid var(--line);
      background:#ffffff;
      color:var(--text);
      outline:none;
      box-shadow: 0 6px 16px rgba(17,24,39,.06);
    }

    .btns{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
    button{
      cursor:pointer;
      border:1px solid var(--line);
      background:#ffffff;
      color:#111827;
      padding:10px 12px;
      border-radius: 14px;
      box-shadow: 0 8px 18px rgba(17,24,39,.06);
      transition: transform .08s ease, filter .12s ease;
    }
    button:hover{ filter:brightness(1.02); transform: translateY(-1px); }
    button.primary{
      background: var(--btn);
      color: var(--btnText);
      border-color: rgba(17,24,39,.0);
    }
    button.ghost{
      background: rgba(255,107,107,.10);
      border-color: rgba(255,107,107,.22);
    }

    .hr{ height:1px; background:var(--line); margin:14px 0; }

    .pillRow{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius:999px;
      border:1px solid var(--line);
      background: #ffffff;
      font-size:12px; color:#374151;
    }
    .pill strong{ color:#111827; }
    .spark{ width:18px; height:18px; border-radius:6px; display:inline-flex; align-items:center; justify-content:center; }
    .spark.s1{ background:var(--soft1); }
    .spark.s2{ background:var(--soft2); }
    .spark.s3{ background:var(--soft3); }
    .spark.s4{ background:var(--soft4); }

    .title{
      margin:6px 0 2px;
      font-size:20px;
      letter-spacing:-.02em;
    }
    .subtitle{ margin:0 0 10px; color:var(--muted); }

    ul,ol{ margin:8px 0 0 18px; }
    li{ margin:6px 0; line-height:1.35; }

    .hint{
      font-size:12px; color:var(--muted); line-height:1.35;
      background: rgba(124,58,237,.06);
      border:1px solid rgba(124,58,237,.14);
      padding:10px 12px;
      border-radius: 14px;
    }

    /* Dropdown (details/summary) */
    details{
      border:1px solid var(--line);
      background:#fff;
      border-radius: 16px;
      padding:10px 12px;
      box-shadow: 0 10px 20px rgba(17,24,39,.06);
      margin-top:10px;
    }
    summary{
      cursor:pointer;
      list-style:none;
      display:flex; align-items:center; justify-content:space-between;
      gap:10px;
      font-weight:600;
      color:#111827;
    }
    summary::-webkit-details-marker{ display:none; }
    .chev{
      width:28px; height:28px;
      border-radius:10px;
      background: var(--chip);
      border:1px solid var(--line);
      display:flex; align-items:center; justify-content:center;
      color:#374151;
      flex:0 0 auto;
    }
    details[open] .chev{ background: rgba(255,107,107,.12); border-color: rgba(255,107,107,.22); }
    .subBlockTitle{
      margin:10px 0 6px;
      font-size:12px;
      color:var(--muted);
      text-transform:uppercase;
      letter-spacing:.10em;
    }

    .footer{
      margin-top:14px;
      font-size:12px;
      color:var(--muted);
      text-align:left;
    }

    @media print{
      body{ background:white; }
      .heroRight, .btns, select{ display:none !important; }
      .card, .hero{ box-shadow:none; background:white; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="hero">
      <div class="heroLeft">
        <h1 class="heroTitle">üçΩÔ∏è Recetario Mensual (Semana + D√≠a)</h1>
        <p class="heroSub">Elige la semana y el d√≠a, y te sale el men√∫ con preparaci√≥n paso a paso por componente (carne, arroz, acompa√±ante y ensalada).</p>

        <div class="heroBadges">
          <div class="badge"><span class="dot"></span><span id="todayBadge">Hoy: ‚Äî</span></div>
          <div class="badge">üç≥ Sin horno (sart√©n / airfryer)</div>
          <div class="badge">ü•ó Ensaladas f√°ciles</div>
        </div>
      </div>

      <div class="heroRight">
        <div class="heroImg" id="heroImg"></div>
        <div class="heroOverlay"></div>

        <div class="heroCaption">
          <div>
            <h2 id="heroTitle">Tu men√∫ del d√≠a</h2>
            <p id="heroDesc">Selecciona semana y d√≠a</p>
          </div>
          <div class="miniChip" id="heroChip">‚ú®</div>
        </div>
      </div>
    </div>

    <div class="grid">
      <!-- Controls -->
      <div class="card">
        <div class="pillRow">
          <div class="pill"><span class="spark s1">üìÖ</span> <strong id="pillWeek">SEMANA 1</strong></div>
          <div class="pill"><span class="spark s2">üóìÔ∏è</span> <strong id="pillDay">LUNES</strong></div>
          <div class="pill"><span class="spark s3">üçΩÔ∏è</span> <span id="pillType">‚Äî</span></div>
        </div>

        <label for="weekSelect">Semana</label>
        <select id="weekSelect"></select>

        <label for="daySelect">D√≠a</label>
        <select id="daySelect"></select>

        <div class="btns">
          <button class="primary" id="showBtn">Ver men√∫</button>
          <button id="printBtn">Imprimir</button>
          <button class="ghost" id="copyBtn">Copiar receta</button>
        </div>

        <div class="hr"></div>
        <div class="hint">
          Tip: abre esto, elige semana + d√≠a y listo.  
          Cada componente se despliega para ver c√≥mo hacerlo (carne/arroz/acompa√±ante/ensalada).
        </div>
      </div>

      <!-- Content -->
      <div class="card" id="content">
        <div class="subtitle">Selecciona Semana + D√≠a y pulsa <b>Ver men√∫</b>.</div>
      </div>
    </div>

    <div class="footer">Hecho para casa ü´∂ ‚Äî ingredientes f√°ciles en Cartagena (√âxito, Ol√≠mpica, Ara, D1, mercado).</div>
  </div>

<script>
  // Im√°genes simples (sin API keys)
  const IMG_BY_TAG = {
    pollo:  "https://picsum.photos/seed/pollo-casa/1000/650",
    res:    "https://picsum.photos/seed/res-casa/1000/650",
    cerdo:  "https://picsum.photos/seed/cerdo-casa/1000/650",
    salmon: "https://picsum.photos/seed/salmon-casa/1000/650",
    frijol: "https://picsum.photos/seed/frijol-casa/1000/650",
    default:"https://picsum.photos/seed/cocina-casa/1000/650"
  };

  // ====== RECETARIO: EXACTAMENTE tus men√∫s + preparaci√≥n por componente ======
  // Cada d√≠a: { titulo, componentes: { Prote√≠na, Arroz, Acompa√±ante, Ensalada } }
  // Cada componente: { nombre, ingredientes:[], pasos:[] }
  const RECETARIO = {
    "SEMANA 1": {
      "LUNES": {
        titulo: "Pechuga en cubos salteada + arroz de ajo + ensalada aguacate/tomate/cebolla",
        componentes: {
          "üçó Prote√≠na": {
            nombre: "Pechuga en cubos salteada con piment√≥n, cebolla y ajo",
            ingredientes: [
              "Pechuga (600 g total para 3 personas)",
              "1/2 piment√≥n, 1 cebolla (o 2 cebollas largas), 3‚Äì4 dientes de ajo",
              "Aceite, sal, pimienta (opcional: lim√≥n)"
            ],
            pasos: [
              "Corta la pechuga en cubos medianos y sazona con sal y pimienta (opcional: un chorrito de lim√≥n).",
              "Sart√©n caliente con aceite: sofr√≠e ajo + cebolla 2‚Äì3 min.",
              "Agrega piment√≥n en tiras, cocina 2 min.",
              "A√±ade la pechuga y saltea 8‚Äì10 min, moviendo, hasta que est√© dorada y bien cocida."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz de ajo",
            ingredientes: [
              "Arroz (1 a 1.5 tazas para 3 personas)",
              "2‚Äì3 dientes de ajo picados",
              "Aceite, sal, agua"
            ],
            pasos: [
              "En la olla: aceite + ajo 30‚Äì40 segundos (sin quemarlo).",
              "Agrega el arroz y sofr√≠e 1 min moviendo.",
              "A√±ade agua y sal (como lo haces normalmente) y cocina hasta que se seque."
            ]
          },
          "üçü Acompa√±ante": {
            nombre: "‚Äî (Hoy no aplica acompa√±ante extra)",
            ingredientes: ["Opcional: si quieren, puedes servir con tajaditas de pl√°tano o papas airfryer."],
            pasos: ["Si no hay acompa√±ante, listo: sirve con arroz y ensalada."]
          },
          "ü•ó Ensalada": {
            nombre: "Ensalada aguacate + tomate + cebolla",
            ingredientes: [
              "Aguacate, tomate, cebolla",
              "Lim√≥n, sal (opcional: pizca de aceite)"
            ],
            pasos: [
              "Pica tomate y cebolla en cubitos.",
              "Agrega lim√≥n y sal, mezcla.",
              "A√±ade el aguacate al final para que no se deshaga."
            ]
          }
        }
      },

      "MARTES": {
        titulo: "Carne molida guisada + arroz palito + tajadas de maduro + ensalada mixta",
        componentes: {
          "ü•© Prote√≠na": {
            nombre: "Carne molida guisada criolla (tomate, cebolla larga, comino)",
            ingredientes: [
              "Carne molida (600 g)",
              "2 tomates, 1 cebolla larga, 2 dientes de ajo",
              "Comino, sal, pimienta (opcional: color/achiote)"
            ],
            pasos: [
              "Pica tomate + cebolla larga + ajo (hogao).",
              "Sofr√≠e el hogao 3‚Äì5 min, agrega comino y sal.",
              "A√±ade la carne molida y cocina 10‚Äì12 min hasta que quede suelta y bien cocida."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz palito (con cebolla larga/cilantro)",
            ingredientes: [
              "Arroz",
              "Cebolla larga y/o cilantro picado",
              "Sal, agua"
            ],
            pasos: [
              "Cocina el arroz normal.",
              "Al agua del arroz agrega cebolla larga/cilantro para que quede con sabor.",
              "Deja terminar la cocci√≥n como siempre."
            ]
          },
          "üçå Acompa√±ante": {
            nombre: "Tajadas de pl√°tano maduro",
            ingredientes: [
              "1‚Äì2 pl√°tanos maduros",
              "Aceite (si es sart√©n) o aceite en spray (si airfryer)",
              "Sal (opcional)"
            ],
            pasos: [
              "Corta el maduro en tajadas.",
              "Airfryer: 180‚Äì200¬∞C por 10‚Äì14 min, volteando a mitad.",
              "Si es sart√©n: dora por ambos lados a fuego medio."
            ]
          },
          "ü•ó Ensalada": {
            nombre: "Pepino + tomate + cebolla + lechuga + lim√≥n",
            ingredientes: [
              "Pepino, tomate, cebolla, lechuga",
              "Lim√≥n, sal"
            ],
            pasos: [
              "Lava todo.",
              "Pica pepino/tomate/cebolla y mezcla con lechuga.",
              "Ali√±a con lim√≥n y sal."
            ]
          }
        }
      },

      "MI√âRCOLES": {
        titulo: "Cerdo asado + patac√≥n + ensalada zanahoria/tomate/cebolla/aguacate",
        componentes: {
          "üêñ Prote√≠na": {
            nombre: "Cerdo asado (sal y pimienta) en sart√©n",
            ingredientes: [
              "Cerdo (600 g) (chuleta/pulpa/lomo)",
              "Sal, pimienta, aceite",
              "Opcional: lim√≥n"
            ],
            pasos: [
              "Sazona el cerdo con sal y pimienta (opcional: lim√≥n).",
              "Sart√©n caliente: dora 3‚Äì4 min por lado.",
              "Baja un poco el fuego y cocina 3‚Äì6 min m√°s (seg√∫n grosor) hasta que est√© bien cocido."
            ]
          },
          "üçö Arroz": {
            nombre: "‚Äî (Hoy no lleva arroz)",
            ingredientes: ["Opcional: si quieren arroz, puedes hacer arroz blanco sencillo."],
            pasos: ["Si no hay arroz, listo: prote√≠na + patac√≥n + ensalada."]
          },
          "ü´ì Acompa√±ante": {
            nombre: "Patac√≥n (pl√°tano verde) en airfryer o sart√©n",
            ingredientes: [
              "Pl√°tano verde (1 grande o 2 medianos)",
              "Aceite (poquito), sal"
            ],
            pasos: [
              "Corta el pl√°tano en trozos.",
              "Airfryer: 180¬∞C 8 min, saca y aplasta.",
              "Vuelve a airfryer 200¬∞C 6‚Äì8 min con sal (si sart√©n: dora por ambos lados)."
            ]
          },
          "ü•ó Ensalada": {
            nombre: "Zanahoria rallada + cebolla + tomate + aguacate",
            ingredientes: [
              "Zanahoria, cebolla, tomate, aguacate",
              "Lim√≥n, sal"
            ],
            pasos: [
              "Ralla la zanahoria y pica cebolla y tomate.",
              "Ali√±a con lim√≥n y sal.",
              "Agrega el aguacate al final."
            ]
          }
        }
      },

      "JUEVES": {
        titulo: "Lomo fino a la plancha + arroz espinaca + ensalada lechuga/ma√≠z/tomate",
        componentes: {
          "ü•© Prote√≠na": {
            nombre: "Lomo fino a la plancha",
            ingredientes: [
              "Lomo fino (600 g)",
              "Sal, pimienta",
              "Opcional: ajo/mantequilla"
            ],
            pasos: [
              "Sazona con sal y pimienta.",
              "Sart√©n bien caliente: 2‚Äì3 min por lado (m√°s jugoso) o 3‚Äì4 min por lado (m√°s cocido).",
              "Deja reposar 2‚Äì3 min antes de cortar."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz con espinaca (con sabor, verde)",
            ingredientes: [
              "Arroz",
              "1‚Äì2 tazas de espinaca",
              "Ajo, aceite, sal, agua"
            ],
            pasos: [
              "Lic√∫a la espinaca con un poquito de agua (para hacer ‚Äòagua verde‚Äô).",
              "Sofr√≠e ajo 30 seg, agrega arroz y mezcla 1 min.",
              "Usa el l√≠quido verde (y completa con agua si hace falta), a√±ade sal y cocina normal."
            ]
          },
          "üçü Acompa√±ante": {
            nombre: "‚Äî (Hoy no lleva acompa√±ante extra)",
            ingredientes: ["Opcional: si quieren, pueden poner papitas airfryer."],
            pasos: ["Sirve con arroz espinaca y ensalada."]
          },
          "ü•ó Ensalada": {
            nombre: "Lechuga + ma√≠z + tomate",
            ingredientes: [
              "Lechuga, tomate, ma√≠z",
              "Lim√≥n, sal (opcional: pizca de aceite)"
            ],
            pasos: [
              "Lava y corta lechuga y tomate.",
              "Agrega ma√≠z.",
              "Ali√±a con lim√≥n y sal."
            ]
          }
        }
      },

      "VIERNES": {
        titulo: "Pechuga asada lim√≥n/or√©gano + patac√≥n pochocho + verduras salteadas",
        componentes: {
          "üçó Prote√≠na": {
            nombre: "Pechuga asada con lim√≥n y or√©gano (sart√©n/plancha)",
            ingredientes: [
              "Pechuga (600 g)",
              "Lim√≥n, or√©gano, sal, pimienta",
              "Opcional: ajo"
            ],
            pasos: [
              "Sazona con lim√≥n + or√©gano + sal + pimienta (10 min si hay tiempo).",
              "Plancha/sart√©n: 4‚Äì6 min por lado seg√∫n grosor.",
              "Deja reposar 2 min y sirve."
            ]
          },
          "üçö Arroz": {
            nombre: "‚Äî (Hoy no lleva arroz)",
            ingredientes: ["Opcional: arroz blanco si prefieren."],
            pasos: ["Si no hay arroz, listo: patac√≥n pochocho + ensalada."]
          },
          "ü´ì Acompa√±ante": {
            nombre: "Patac√≥n pochocho (pl√°tano pochocho)",
            ingredientes: [
              "Pl√°tano pochocho",
              "Aceite (poquito) y sal"
            ],
            pasos: [
              "Corta en trozos, airfryer 180¬∞C 8‚Äì10 min.",
              "Aplasta y vuelve 200¬∞C 6‚Äì8 min con sal."
            ]
          },
          "ü•ó Ensalada": {
            nombre: "Verduras salteadas (r√°pidas)",
            ingredientes: [
              "Cebolla + piment√≥n + zanahoria (y lo que tengas)",
              "Ajo, sal, pimienta",
              "Opcional: soya o lim√≥n"
            ],
            pasos: [
              "Sart√©n caliente con aceite: ajo 15 seg.",
              "Agrega verduras y saltea 6‚Äì8 min para que queden crocantes.",
              "Ajusta sal y termina con lim√≥n (o gotica de soya)."
            ]
          }
        }
      }
    },

    "SEMANA 2": {
      "LUNES": {
        titulo: "Carne molida salteada + patac√≥n verde + ensalada cl√°sica",
        componentes: {
          "ü•© Prote√≠na": {
            nombre: "Carne molida salteada con zanahoria y cebolla",
            ingredientes: [
              "Carne molida (600 g)",
              "Zanahoria, cebolla, ajo",
              "Sal, pimienta (opcional: comino)"
            ],
            pasos: [
              "Sofr√≠e ajo + cebolla 2‚Äì3 min.",
              "Agrega zanahoria y cocina 2 min.",
              "A√±ade carne, salpimienta y cocina 10‚Äì12 min."
            ]
          },
          "üçö Arroz": {
            nombre: "‚Äî (Hoy no lleva arroz)",
            ingredientes: ["Opcional: arroz blanco o de ajo si quieren."],
            pasos: ["Sirve con patac√≥n y ensalada."]
          },
          "ü´ì Acompa√±ante": {
            nombre: "Patac√≥n verde",
            ingredientes: [
              "Pl√°tano verde",
              "Aceite (poquito), sal"
            ],
            pasos: [
              "Airfryer: 180¬∞C 8 min, aplasta, 200¬∞C 6‚Äì8 min.",
              "Si sart√©n: dora 2 veces (antes y despu√©s de aplastar)."
            ]
          },
          "ü•ó Ensalada": {
            nombre: "Aguacate + tomate + cebolla",
            ingredientes: ["Aguacate, tomate, cebolla, lim√≥n, sal"],
            pasos: [
              "Pica tomate y cebolla.",
              "Ali√±a con lim√≥n y sal.",
              "Agrega aguacate al final."
            ]
          }
        }
      },

      "MARTES": {
        titulo: "Cerdo guisado + papas airfryer + ensalada pepino lim√≥n",
        componentes: {
          "üêñ Prote√≠na": {
            nombre: "Cerdo guisado estilo casero (tomate y ajo)",
            ingredientes: [
              "Cerdo (600 g)",
              "Tomate, ajo (opcional: cebolla)",
              "Sal, pimienta",
              "Ag√ºita (poquita)"
            ],
            pasos: [
              "Sofr√≠e ajo + tomate 3‚Äì5 min.",
              "Agrega el cerdo, salpimienta, mezcla.",
              "A√±ade un chorrito de agua, tapa y cocina 15‚Äì20 min hasta ablandar."
            ]
          },
          "üçö Arroz": {
            nombre: "‚Äî (Hoy no lleva arroz)",
            ingredientes: ["Opcional: arroz blanco sencillo."],
            pasos: ["Sirve con papas y ensalada."]
          },
          "ü•î Acompa√±ante": {
            nombre: "Papas en airfryer",
            ingredientes: [
              "Papas (3‚Äì4 medianas)",
              "Aceite, sal (opcional: paprika)"
            ],
            pasos: [
              "Corta papas en cubos o cascos.",
              "Aceite + sal (opcional paprika).",
              "Airfryer 200¬∞C 15‚Äì20 min, moviendo a mitad."
            ]
          },
          "ü•ó Ensalada": {
            nombre: "Pepino + lim√≥n",
            ingredientes: ["Pepino, lim√≥n, sal (opcional: pimienta)"],
            pasos: [
              "Corta el pepino.",
              "Ali√±a con lim√≥n y sal."
            ]
          }
        }
      },

      "MI√âRCOLES": {
        titulo: "Frijoles rojos + carne asada + arroz ajo + maduro asado + ensalada",
        componentes: {
          "ü´ò Frijoles": {
            nombre: "Frijoles rojos (Mar√≠a y Candy)",
            ingredientes: [
              "Frijol rojo",
              "Ali√±os: tomate, cebolla, ajo",
              "Sal (opcional: comino)"
            ],
            pasos: [
              "Cocina frijoles hasta que est√©n blanditos (ideal si remojas antes).",
              "Haz hogao (tomate + cebolla + ajo) y agr√©galo para dar sabor.",
              "Ajusta sal y deja espesar a gusto."
            ]
          },
          "ü•© Prote√≠na": {
            nombre: "Carne asada (plancha/sart√©n)",
            ingredientes: ["Carne (600 g)", "Sal, pimienta", "Opcional: lim√≥n"],
            pasos: [
              "Sazona con sal y pimienta.",
              "Plancha/sart√©n: 3‚Äì4 min por lado seg√∫n grosor.",
              "Reposa 2‚Äì3 min."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz con ajo",
            ingredientes: ["Arroz", "Ajo", "Aceite, sal, agua"],
            pasos: [
              "Aceite + ajo 30 seg.",
              "Agrega arroz, sofr√≠e 1 min.",
              "Agua + sal, cocina normal."
            ]
          },
          "üçå Acompa√±ante": {
            nombre: "Maduro asado (airfryer)",
            ingredientes: ["Pl√°tano maduro", "Opcional: pizca de sal o canela"],
            pasos: [
              "Corta en tajadas.",
              "Airfryer 200¬∞C 10‚Äì14 min, volteando a mitad."
            ]
          },
          "ü•ó Ensalada": {
            nombre: "Repollo + zanahoria",
            ingredientes: ["Repollo, zanahoria", "Lim√≥n, sal"],
            pasos: [
              "Ralla zanahoria y pica repollo finito.",
              "Ali√±a con lim√≥n y sal."
            ]
          }
        }
      },

      "JUEVES": {
        titulo: "Salm√≥n sellado + arroz lim√≥n + papas airfryer + ensalada espinaca",
        componentes: {
          "üêü Prote√≠na": {
            nombre: "Salm√≥n sellado con mantequilla y ajo",
            ingredientes: [
              "Salm√≥n (3 filetes)",
              "Mantequilla, ajo",
              "Sal, pimienta, lim√≥n"
            ],
            pasos: [
              "Sazona el salm√≥n con sal y pimienta.",
              "Sart√©n caliente: 3‚Äì4 min por un lado, voltea 1‚Äì2 min.",
              "Agrega mantequilla + ajo y ba√±a el salm√≥n 30‚Äì40 seg.",
              "Termina con un chorrito de lim√≥n."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz con lim√≥n",
            ingredientes: ["Arroz", "Lim√≥n (jugo y un poquito de ralladura)", "Sal"],
            pasos: [
              "Cocina arroz normal.",
              "Al final agrega jugo de lim√≥n y (opcional) ralladura poquita, mezcla."
            ]
          },
          "ü•î Acompa√±ante": {
            nombre: "Papas en airfryer",
            ingredientes: ["Papas", "Aceite, sal"],
            pasos: [
              "Corta, aceite + sal.",
              "Airfryer 200¬∞C 15‚Äì20 min, mueve a mitad."
            ]
          },
          "ü•ó Ensalada": {
            nombre: "Ensalada de espinaca fresca",
            ingredientes: ["Espinaca", "Lim√≥n, sal", "Opcional: tomate"],
            pasos: [
              "Lava la espinaca.",
              "Ali√±a con lim√≥n y sal (opcional tomate)."
            ]
          }
        }
      },

      "VIERNES": {
        titulo: "Lomo sellado con pimienta + patac√≥n pochocho + ensalada",
        componentes: {
          "ü•© Prote√≠na": {
            nombre: "Lomo carne sellado con pimienta",
            ingredientes: ["Lomo (600 g)", "Sal, pimienta", "Aceite/mantequilla"],
            pasos: [
              "Sazona con sal y pimienta.",
              "Sella 2‚Äì3 min por lado y reposa 2‚Äì3 min."
            ]
          },
          "üçö Arroz": { nombre:"‚Äî (Hoy no lleva arroz)", ingredientes:[""], pasos:["Sirve con patac√≥n y ensalada."] },
          "ü´ì Acompa√±ante": {
            nombre: "Patac√≥n pochocho",
            ingredientes: ["Pl√°tano pochocho", "Aceite (poquito), sal"],
            pasos: [
              "Airfryer 180¬∞C 8‚Äì10 min, aplasta.",
              "Airfryer 200¬∞C 6‚Äì8 min con sal."
            ]
          },
          "ü•ó Ensalada": {
            nombre: "Lechuga + tomate + cebolla",
            ingredientes: ["Lechuga, tomate, cebolla", "Lim√≥n, sal"],
            pasos: ["Lava, pica, mezcla y ali√±a con lim√≥n y sal."]
          }
        }
      }
    },

    "SEMANA 3": {
      "LUNES": {
        titulo: "Cerdo a la plancha + arroz palito + papas airfryer + ensalada cl√°sica",
        componentes: {
          "üêñ Prote√≠na": {
            nombre: "Cerdo a la plancha",
            ingredientes: ["Cerdo (600 g)", "Sal, pimienta", "Opcional: ajo o lim√≥n"],
            pasos: [
              "Sazona el cerdo.",
              "Plancha/sart√©n: 4‚Äì6 min por lado seg√∫n grosor.",
              "Reposa 2 min."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz palito",
            ingredientes: ["Arroz", "Cebolla larga/cilantro", "Sal"],
            pasos: [
              "Cocina arroz normal.",
              "Agrega cebolla larga/cilantro al agua para sabor."
            ]
          },
          "ü•î Acompa√±ante": {
            nombre: "Papas airfryer",
            ingredientes: ["Papas", "Aceite, sal"],
            pasos: ["Airfryer 200¬∞C 15‚Äì20 min, mueve a mitad."]
          },
          "ü•ó Ensalada": {
            nombre: "Aguacate + tomate + cebolla",
            ingredientes: ["Aguacate, tomate, cebolla", "Lim√≥n, sal"],
            pasos: ["Pica, ali√±a con lim√≥n y sal, agrega aguacate al final."]
          }
        }
      },

      "MARTES": {
        titulo: "Pechuga asada + patac√≥n verde + ensalada pepino lim√≥n",
        componentes: {
          "üçó Prote√≠na": {
            nombre: "Pechuga asada (sart√©n/plancha)",
            ingredientes: ["Pechuga (600 g)", "Sal, pimienta", "Opcional: lim√≥n"],
            pasos: ["Sazona y asa 4‚Äì6 min por lado seg√∫n grosor."]
          },
          "üçö Arroz": { nombre:"‚Äî (Hoy no lleva arroz)", ingredientes:[""], pasos:["Sirve con patac√≥n y ensalada."] },
          "ü´ì Acompa√±ante": {
            nombre: "Patac√≥n verde",
            ingredientes: ["Pl√°tano verde", "Aceite (poquito), sal"],
            pasos: ["180¬∞C 8 min, aplasta, 200¬∞C 6‚Äì8 min (airfryer) o sart√©n."]
          },
          "ü•ó Ensalada": {
            nombre: "Pepino + lim√≥n",
            ingredientes: ["Pepino, lim√≥n, sal"],
            pasos: ["Corta el pepino y ali√±a con lim√≥n y sal."]
          }
        }
      },

      "MI√âRCOLES": {
        titulo: "Carne molida + arroz ajo + ensalada repollo zanahoria",
        componentes: {
          "ü•© Prote√≠na": {
            nombre: "Carne molida (simple con ajo y cebolla)",
            ingredientes: ["Carne molida (600 g)", "Ajo, cebolla", "Sal, pimienta"],
            pasos: [
              "Sofr√≠e ajo + cebolla 2‚Äì3 min.",
              "Agrega carne, salpimienta y cocina 10‚Äì12 min."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz con ajo",
            ingredientes: ["Arroz", "Ajo", "Aceite, sal, agua"],
            pasos: ["Aceite + ajo 30 seg, arroz 1 min, agua + sal, cocina."]
          },
          "üçü Acompa√±ante": { nombre:"‚Äî", ingredientes:[""], pasos:["Hoy no hay acompa√±ante adicional."] },
          "ü•ó Ensalada": {
            nombre: "Repollo + zanahoria",
            ingredientes: ["Repollo, zanahoria", "Lim√≥n, sal"],
            pasos: ["Pica fino, mezcla y ali√±a con lim√≥n y sal."]
          }
        }
      },

      "JUEVES": {
        titulo: "Salm√≥n al sart√©n + arroz blanco + vegetales airfryer + ensalada espinaca/mango",
        componentes: {
          "üêü Prote√≠na": {
            nombre: "Salm√≥n al sart√©n con lim√≥n y pimienta",
            ingredientes: ["Salm√≥n (3 filetes)", "Lim√≥n, pimienta, sal", "Aceite"],
            pasos: [
              "Sazona con sal, pimienta y lim√≥n.",
              "Sart√©n caliente: 3‚Äì4 min por lado (seg√∫n grosor)."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz blanco",
            ingredientes: ["Arroz", "Agua", "Sal"],
            pasos: ["Cocina arroz normal."]
          },
          "ü•¶ Acompa√±ante": {
            nombre: "Vegetales en airfryer",
            ingredientes: ["Vegetales (lo que haya)", "Aceite, sal"],
            pasos: [
              "Corta vegetales, aceite + sal.",
              "Airfryer 190‚Äì200¬∞C 10‚Äì14 min, mueve a mitad."
            ]
          },
          "ü•ó Ensalada": {
            nombre: "Espinaca + mango biche",
            ingredientes: ["Espinaca", "Mango biche", "Lim√≥n, sal"],
            pasos: ["Mezcla espinaca con tiritas de mango, lim√≥n y sal."]
          }
        }
      },

      "VIERNES": {
        titulo: "Lomo a la plancha con ajo + arroz ajo + patac√≥n pochocho + ensalada tomate/queso",
        componentes: {
          "ü•© Prote√≠na": {
            nombre: "Lomo fino a la plancha con ajo",
            ingredientes: ["Lomo fino (600 g)", "Sal, pimienta", "Ajo", "Aceite/mantequilla"],
            pasos: [
              "Sazona el lomo.",
              "Sella 2‚Äì3 min por lado.",
              "Al final agrega ajo 20‚Äì30 seg y ba√±a la carne. Reposa 2 min."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz con ajo",
            ingredientes: ["Arroz", "Ajo", "Aceite, sal, agua"],
            pasos: ["Aceite + ajo 30 seg, arroz 1 min, agua + sal, cocina."]
          },
          "ü´ì Acompa√±ante": {
            nombre: "Patac√≥n pochocho",
            ingredientes: ["Pl√°tano pochocho", "Aceite (poquito), sal"],
            pasos: ["180¬∞C 8‚Äì10 min, aplasta, 200¬∞C 6‚Äì8 min."]
          },
          "ü•ó Ensalada": {
            nombre: "Tomate + queso coste√±o",
            ingredientes: ["Tomate", "Queso coste√±o", "Opcional: lim√≥n"],
            pasos: ["Pica tomate, agrega cubitos de queso (opcional: lim√≥n)."]
          }
        }
      }
    },

    "SEMANA 4": {
      "LUNES": {
        titulo: "Pechuga champi√±ones/cebolla + arroz espinaca + papas airfryer + ensalada cl√°sica",
        componentes: {
          "üçó Prote√≠na": {
            nombre: "Pechuga salteada con champi√±ones y cebolla",
            ingredientes: ["Pechuga (600 g)", "Champi√±ones", "Cebolla", "Sal, pimienta", "Aceite"],
            pasos: [
              "Saltea cebolla 2 min.",
              "Agrega champi√±ones 4 min.",
              "A√±ade pechuga en tiras, salpimienta y cocina 8‚Äì10 min."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz espinaca",
            ingredientes: ["Arroz", "Espinaca", "Ajo", "Aceite, sal, agua"],
            pasos: [
              "Lic√∫a espinaca con un poco de agua.",
              "Sofr√≠e ajo 30 seg, agrega arroz 1 min.",
              "Agrega l√≠quido verde + sal y cocina normal."
            ]
          },
          "ü•î Acompa√±ante": {
            nombre: "Papas airfryer",
            ingredientes: ["Papas", "Aceite, sal"],
            pasos: ["Airfryer 200¬∞C 15‚Äì20 min, mueve a mitad."]
          },
          "ü•ó Ensalada": {
            nombre: "Aguacate + tomate + cebolla",
            ingredientes: ["Aguacate, tomate, cebolla", "Lim√≥n, sal"],
            pasos: ["Pica, ali√±a, agrega aguacate al final."]
          }
        }
      },

      "MARTES": {
        titulo: "Cerdo con especias dulces (sin horno) + arroz ajo + patac√≥n verde + ensalada pepino lim√≥n",
        componentes: {
          "üêñ Prote√≠na": {
            nombre: "Cerdo con especias dulces (paprika y miel ligera) en sart√©n tapado",
            ingredientes: [
              "Cerdo (600 g)",
              "Paprika, sal, pimienta",
              "1 cucharadita de miel (opcional)",
              "Lim√≥n",
              "Aceite"
            ],
            pasos: [
              "Mezcla paprika + sal + pimienta + gotica de miel (opcional) + lim√≥n.",
              "Unta el cerdo.",
              "Sart√©n: sella 3 min por lado.",
              "Baja el fuego, tapa y cocina 8‚Äì12 min (seg√∫n grosor) hasta que est√© bien cocido."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz con ajo",
            ingredientes: ["Arroz", "Ajo", "Aceite, sal, agua"],
            pasos: ["Aceite + ajo 30 seg, arroz 1 min, agua + sal, cocina."]
          },
          "ü´ì Acompa√±ante": {
            nombre: "Patac√≥n verde",
            ingredientes: ["Pl√°tano verde", "Aceite (poquito), sal"],
            pasos: ["180¬∞C 8 min, aplasta, 200¬∞C 6‚Äì8 min (airfryer) o sart√©n."]
          },
          "ü•ó Ensalada": {
            nombre: "Pepino + lim√≥n",
            ingredientes: ["Pepino, lim√≥n, sal"],
            pasos: ["Corta pepino y ali√±a con lim√≥n y sal."]
          }
        }
      },

      "MI√âRCOLES": {
        titulo: "Frijoles rojos + carne molida criolla + arroz blanco + maduro airfryer + ensalada",
        componentes: {
          "ü´ò Frijoles": {
            nombre: "Frijoles rojos",
            ingredientes: ["Frijol rojo", "Ali√±os (tomate/cebolla/ajo)", "Sal"],
            pasos: ["Cocina frijoles hasta blanditos y agrega hogao para sabor."]
          },
          "ü•© Prote√≠na": {
            nombre: "Carne molida criolla (para mezclar con frijoles)",
            ingredientes: ["Carne molida (300‚Äì600 g)", "Tomate, cebolla, ajo", "Comino, sal"],
            pasos: [
              "Haz hogao (tomate + cebolla + ajo) 3‚Äì5 min.",
              "Agrega comino + sal.",
              "A√±ade carne y cocina 10‚Äì12 min.",
              "Mezcla con los frijoles al final."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz blanco",
            ingredientes: ["Arroz", "Agua", "Sal"],
            pasos: ["Cocina arroz normal."]
          },
          "üçå Acompa√±ante": {
            nombre: "Maduro airfryer",
            ingredientes: ["Pl√°tano maduro"],
            pasos: ["Tajadas, airfryer 200¬∞C 10‚Äì14 min, voltea a mitad."]
          },
          "ü•ó Ensalada": {
            nombre: "Repollo + zanahoria",
            ingredientes: ["Repollo, zanahoria", "Lim√≥n, sal"],
            pasos: ["Pica fino y ali√±a con lim√≥n y sal."]
          }
        }
      },

      "JUEVES": {
        titulo: "Pechuga en crema Finesse + arroz espinaca + ensalada espinaca",
        componentes: {
          "üçó Prote√≠na": {
            nombre: "Pechuga en tiras salteada en crema (Finesse)",
            ingredientes: ["Pechuga (600 g)", "Cebolla, ajo", "Crema Finesse", "Sal, pimienta"],
            pasos: [
              "Saltea cebolla + ajo 2 min.",
              "Agrega pechuga en tiras, salpimienta y cocina 6‚Äì8 min.",
              "Baja el fuego, agrega crema Finesse y mezcla 2‚Äì3 min (sin hervir fuerte)."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz espinaca",
            ingredientes: ["Arroz", "Espinaca", "Ajo", "Aceite, sal, agua"],
            pasos: ["Lic√∫a espinaca, sofr√≠e ajo, agrega arroz, l√≠quido verde y cocina."]
          },
          "üçü Acompa√±ante": { nombre:"‚Äî", ingredientes:[""], pasos:["Hoy no hay acompa√±ante adicional."] },
          "ü•ó Ensalada": {
            nombre: "Espinaca fresca",
            ingredientes: ["Espinaca", "Lim√≥n, sal"],
            pasos: ["Lava y ali√±a con lim√≥n y sal."]
          }
        }
      },

      "VIERNES": {
        titulo: "Lomo grillado romero/ajo + arroz palito + patac√≥n pochocho + ensalada lechuga/tomate",
        componentes: {
          "ü•© Prote√≠na": {
            nombre: "Lomo fino grillado con romero y ajo (sart√©n/plancha)",
            ingredientes: ["Lomo fino (600 g)", "Romero (seco sirve)", "Ajo", "Sal, pimienta"],
            pasos: [
              "Sazona con sal, pimienta, romero y ajo.",
              "Plancha/sart√©n: 2‚Äì3 min por lado (o al gusto).",
              "Reposa 2‚Äì3 min."
            ]
          },
          "üçö Arroz": {
            nombre: "Arroz palito",
            ingredientes: ["Arroz", "Cebolla larga/cilantro", "Sal"],
            pasos: ["Cocina arroz normal y agrega cebolla larga/cilantro al agua."]
          },
          "ü´ì Acompa√±ante": {
            nombre: "Patac√≥n pochocho",
            ingredientes: ["Pl√°tano pochocho", "Aceite (poquito), sal"],
            pasos: ["180¬∞C 8‚Äì10 min, aplasta, 200¬∞C 6‚Äì8 min."]
          },
          "ü•ó Ensalada": {
            nombre: "Lechuga + tomate",
            ingredientes: ["Lechuga, tomate", "Lim√≥n, sal"],
            pasos: ["Lava, pica, mezcla y ali√±a con lim√≥n y sal."]
          }
        }
      }
    }
  };

  const WEEK_ORDER = ["SEMANA 1","SEMANA 2","SEMANA 3","SEMANA 4"];
  const DAY_ORDER  = ["LUNES","MARTES","MI√âRCOLES","JUEVES","VIERNES"];

  // helpers
  function detectTag(text){
    const t = (text||"").toLowerCase();
    if (t.includes("salm√≥n") || t.includes("salmon")) return "salmon";
    if (t.includes("frijol")) return "frijol";
    if (t.includes("pechuga") || t.includes("pollo")) return "pollo";
    if (t.includes("cerdo")) return "cerdo";
    if (t.includes("lomo") || t.includes("res") || t.includes("carne molida") || t.includes("carne asada")) return "res";
    return "default";
  }
  function tagLabel(tag){
    return ({
      pollo:"Pollo / Pechuga",
      res:"Res",
      cerdo:"Cerdo",
      salmon:"Salm√≥n",
      frijol:"Fr√≠joles",
      default:"Cocina"
    })[tag] || "Cocina";
  }
  function emojiByTag(tag){
    return ({
      pollo:"üçó", res:"ü•©", cerdo:"üêñ", salmon:"üêü", frijol:"ü´ò", default:"üçΩÔ∏è"
    })[tag] || "üçΩÔ∏è";
  }
  function escapeHtml(str){
    return String(str)
      .replaceAll("&","&amp;")
      .replaceAll("<","&lt;")
      .replaceAll(">","&gt;")
      .replaceAll('"',"&quot;")
      .replaceAll("'","&#039;");
  }

  // UI refs
  const weekSelect = document.getElementById("weekSelect");
  const daySelect  = document.getElementById("daySelect");
  const content    = document.getElementById("content");

  const heroImg   = document.getElementById("heroImg");
  const heroTitle = document.getElementById("heroTitle");
  const heroDesc  = document.getElementById("heroDesc");
  const heroChip  = document.getElementById("heroChip");

  const pillWeek  = document.getElementById("pillWeek");
  const pillDay   = document.getElementById("pillDay");
  const pillType  = document.getElementById("pillType");

  function fillSelect(el, items){
    el.innerHTML = "";
    items.forEach(v=>{
      const opt = document.createElement("option");
      opt.value = v;
      opt.textContent = v;
      el.appendChild(opt);
    });
  }

  function renderComponent(name, comp){
    const ing = (comp.ingredientes || []).filter(x=>String(x).trim().length);
    const steps = (comp.pasos || []).filter(x=>String(x).trim().length);

    return `
      <details>
        <summary>
          <span>${escapeHtml(name)} ‚Äî ${escapeHtml(comp.nombre || "")}</span>
          <span class="chev">‚åÑ</span>
        </summary>

        <div class="subBlockTitle">Ingredientes</div>
        ${ing.length ? `<ul>${ing.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ul>` : `<div class="subtitle">‚Äî</div>`}

        <div class="subBlockTitle">Paso a paso</div>
        ${steps.length ? `<ol>${steps.map(x=>`<li>${escapeHtml(x)}</li>`).join("")}</ol>` : `<div class="subtitle">‚Äî</div>`}
      </details>
    `;
  }

  function render(){
    const w = weekSelect.value;
    const d = daySelect.value;
    const data = RECETARIO?.[w]?.[d];

    pillWeek.textContent = w;
    pillDay.textContent  = d;

    if(!data){
      content.innerHTML = `<div class="subtitle">No hay receta para ${escapeHtml(w)} - ${escapeHtml(d)}.</div>`;
      heroImg.style.backgroundImage = `url(${IMG_BY_TAG.default})`;
      heroTitle.textContent = "Tu men√∫ del d√≠a";
      heroDesc.textContent = "Selecciona semana y d√≠a";
      heroChip.textContent = "‚ú®";
      pillType.textContent = "‚Äî";
      return;
    }

    const tag = detectTag(data.titulo);
    heroImg.style.backgroundImage = `url(${IMG_BY_TAG[tag] || IMG_BY_TAG.default})`;
    heroTitle.textContent = `${emojiByTag(tag)} ${data.titulo}`;
    heroDesc.textContent  = `${w} ¬∑ ${d}`;
    heroChip.textContent  = `${emojiByTag(tag)} ${tagLabel(tag)}`;

    pillType.textContent = `${emojiByTag(tag)} ${tagLabel(tag)}`;

    // Menu list simple (qu√© toca hoy)
    const componentes = data.componentes || {};
    const menuList = Object.entries(componentes).map(([k,v])=>`<li><b>${escapeHtml(k)}</b>: ${escapeHtml(v.nombre || "")}</li>`).join("");

    content.innerHTML = `
      <div class="pillRow">
        <div class="pill"><span class="spark s4">‚úÖ</span> <strong>${escapeHtml(w)} ¬∑ ${escapeHtml(d)}</strong></div>
        <div class="pill"><span class="spark s2">${emojiByTag(tag)}</span> ${escapeHtml(tagLabel(tag))}</div>
        <div class="pill"><span class="spark s1">üß°</span> Paso a paso por componente</div>
      </div>

      <div class="title">${escapeHtml(data.titulo)}</div>
      <div class="subtitle">Men√∫ del d√≠a (resumen)</div>
      <ul>${menuList}</ul>

      <div class="hr"></div>
      <div class="subtitle"><b>Despliega cada parte</b> para ver ingredientes y preparaci√≥n:</div>

      ${Object.entries(componentes).map(([name,comp])=>renderComponent(name, comp)).join("")}
    `;
  }

  // Init
  fillSelect(weekSelect, WEEK_ORDER);
  fillSelect(daySelect, DAY_ORDER);

  document.getElementById("showBtn").addEventListener("click", render);
  document.getElementById("printBtn").addEventListener("click", ()=>window.print());

  document.getElementById("copyBtn").addEventListener("click", async ()=>{
    const w = weekSelect.value;
    const d = daySelect.value;
    const data = RECETARIO?.[w]?.[d];
    if(!data) return;

    const comps = data.componentes || {};
    const lines = [`${w} - ${d}`, `T√≠tulo: ${data.titulo}`, ""];
    for(const [k, v] of Object.entries(comps)){
      lines.push(`${k}: ${v.nombre}`);
      const ing = (v.ingredientes||[]).filter(x=>String(x).trim().length);
      const steps = (v.pasos||[]).filter(x=>String(x).trim().length);
      lines.push("Ingredientes:");
      ing.forEach(i=>lines.push(`- ${i}`));
      lines.push("Paso a paso:");
      steps.forEach((p,idx)=>lines.push(`${idx+1}. ${p}`));
      lines.push("");
    }
    const text = lines.join("\n");

    try{
      await navigator.clipboard.writeText(text);
      alert("‚úÖ Receta copiada. P√©gala en WhatsApp o Notas.");
    }catch(e){
      alert("No pude copiar autom√°ticamente. Selecciona y copia manual.");
    }
  });

  // Today badge
  const today = new Date();
  const dias = ["DOMINGO","LUNES","MARTES","MI√âRCOLES","JUEVES","VIERNES","S√ÅBADO"];
  document.getElementById("todayBadge").textContent = `Hoy: ${dias[today.getDay()]}`;

  // Default render
  render();
</script>
</body>
</html>
